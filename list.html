<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Students - Student Management</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <a class="navbar-brand" href="#">Student Management</a>
    <div class="ml-auto">
      <a href="add.html" class="btn btn-success btn-sm mr-2">Add Student</a>
      <a href="/logout" class="btn btn-light btn-sm">Logout</a>
    </div>
  </nav>

  <main class="container mt-4">
    <div class="d-flex justify-content-between align-items-center">
      <h3>Students</h3>
      <form class="form-inline" method="get" action="/students">
        <input name="q" class="form-control mr-2" type="search" placeholder="Search by name" value="">
        <button class="btn btn-outline-light btn-sm bg-primary text-white" type="submit">Search</button>
      </form>
    </div>

    <!-- Server may show messages after actions: added / updated / deleted -->
    <div id="serverMsg" class="mt-3"></div>

    <div class="table-responsive mt-3">
      <table class="table table-striped table-bordered">
        <thead class="thead-light">
          <tr>
            <th style="width:6%">ID</th>
            <th style="width:36%">Name</th>
            <th style="width:12%">Age</th>
            <th style="width:28%">Department</th>
            <th style="width:18%">Actions</th>
          </tr>
        </thead>
        <tbody>
          <!--
            Replace this static block with server-rendered rows.
            Example with JSP (inside list.jsp):
            <c:forEach var="s" items="${students}">
              <tr>
                <td>${s.id}</td><td>${s.name}</td><td>${s.age}</td><td>${s.department}</td>
                <td>
                  <a href="edit?id=${s.id}" class="btn btn-sm btn-primary">Edit</a>
                  <a href="delete?id=${s.id}" class="btn btn-sm btn-danger" onclick="return confirm('Delete?')">Delete</a>
                </td>
              </tr>
            </c:forEach>
          -->

          <!-- Sample static rows for preview -->
          <tr>
            <td>1</td>
            <td>Alice Johnson</td>
            <td>20</td>
            <td>Computer Science</td>
            <td>
              <a href="edit.html?id=1" class="btn btn-sm btn-primary">Edit</a>
              <a href="javascript:void(0)" onclick="confirmDelete(1)" class="btn btn-sm btn-danger">Delete</a>
            </td>
          </tr>
          <tr>
            <td>2</td>
            <td>Bob Singh</td>
            <td>22</td>
            <td>Electronics</td>
            <td>
              <a href="edit.html?id=2" class="btn btn-sm btn-primary">Edit</a>
              <a href="javascript:void(0)" onclick="confirmDelete(2)" class="btn btn-sm btn-danger">Delete</a>
            </td>
          </tr>

        </tbody>
      </table>
    </div>
  </main>

  <script>
    function confirmDelete(id) {
      if (confirm('Are you sure you want to delete this student?')) {
        // If using servlet path:
        window.location.href = '/delete?id=' + encodeURIComponent(id);
      }
    }

    // Example: show server msg if provided as query param (e.g., ?msg=added)
    (function(){
      const params = new URLSearchParams(window.location.search);
      const msg = params.get('msg');
      if (msg) {
        const el = document.getElementById('serverMsg');
        el.innerHTML = '<div class="alert alert-success">' + msg + '</div>';
      }
    })();
  </script>
</body>
</html>
